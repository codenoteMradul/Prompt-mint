<div class="mb-6 flex items-center justify-between gap-4">
  <div class="flex items-center gap-3">
    <%= link_to "â† Back", messages_path, class: "text-sm text-slate-400 hover:text-white transition-colors duration-300" %>

    <div class="flex items-center gap-3">
      <% if @other_user.avatar.attached? %>
        <%= image_tag @other_user.avatar, class: "h-10 w-10 rounded-full border border-white/10 object-cover" %>
      <% else %>
        <div class="h-10 w-10 rounded-full border border-white/10 bg-gradient-to-br from-fuchsia-500/30 via-pink-500/20 to-cyan-400/20"></div>
      <% end %>
      <div>
        <div class="text-sm font-semibold text-white"><%= @other_user.name %></div>
        <div class="text-xs text-slate-500">Conversation</div>
      </div>
    </div>
  </div>

  <%= link_to "View profile", user_path(@other_user), class: "rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm font-medium text-slate-100 hover:bg-white/10 transition-all duration-300" %>
</div>

<div class="rounded-3xl border border-white/10 bg-white/[0.04] shadow-[0_0_0_1px_rgba(255,255,255,0.03)] backdrop-blur">
  <%= turbo_stream_from Message.stream_for(current_user.id, @other_user.id) %>

  <div id="messages" class="max-h-[28rem] overflow-y-auto p-5 space-y-3">
    <% if @messages.empty? %>
      <p class="text-sm text-slate-400">Say hello ðŸ‘‹</p>
    <% end %>

    <% @messages.each do |message| %>
      <%= render "messages/message", message:, viewer_id: current_user.id %>
    <% end %>
  </div>

  <div class="border-t border-white/10 p-5">
    <%= render "messages/form", message: @message, other_user: @other_user %>
  </div>
</div>
