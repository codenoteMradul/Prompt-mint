<section class="mb-8">
  <div class="rounded-3xl border border-white/10 bg-white/[0.04] p-8 shadow-[0_0_0_1px_rgba(255,255,255,0.03)] backdrop-blur">
    <div class="flex flex-col gap-6 sm:flex-row sm:items-end sm:justify-between">
      <div>
        <p class="text-xs font-medium tracking-wide text-slate-400">Account settings</p>
        <div class="mt-3 flex items-center gap-4">
          <% if current_user.avatar.attached? %>
            <%= image_tag current_user.avatar, class: "h-16 w-16 rounded-full border border-white/10 object-cover" %>
          <% else %>
            <div class="h-16 w-16 rounded-full border border-white/10 bg-gradient-to-br from-fuchsia-500/30 via-pink-500/20 to-cyan-400/20"></div>
          <% end %>

          <div>
            <h1 class="text-3xl font-semibold tracking-tight text-white sm:text-4xl"><%= current_user.name %></h1>
            <p class="mt-1 text-sm text-slate-400"><%= current_user.email %></p>
          </div>
        </div>
      </div>

      <%= link_to "Edit account", edit_account_path, class: "inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-5 py-3 text-sm font-medium text-slate-100 hover:bg-white/10 transition-all duration-300" %>
    </div>

    <div class="mt-6 h-px w-full bg-gradient-to-r from-fuchsia-500/40 via-pink-500/20 to-cyan-400/30"></div>

    <div class="mt-6 grid grid-cols-1 gap-4 md:grid-cols-3">
      <div class="rounded-2xl border border-white/10 bg-black/20 p-6">
        <div class="text-sm font-semibold text-white">Personal Info</div>
        <dl class="mt-4 space-y-3 text-sm">
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Name</dt>
            <dd class="text-slate-200"><%= current_user.name %></dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Phone</dt>
            <dd class="text-slate-200"><%= current_user.phone %></dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Country</dt>
            <dd class="text-slate-200"><%= current_user.country %></dd>
          </div>
        </dl>
      </div>

      <div class="rounded-2xl border border-white/10 bg-black/20 p-6">
        <div class="text-sm font-semibold text-white">Security</div>
        <p class="mt-3 text-sm text-slate-400">Update your email and password from the edit screen.</p>
      </div>

      <div class="rounded-2xl border border-white/10 bg-black/20 p-6">
        <div class="text-sm font-semibold text-white">Public Profile</div>
        <dl class="mt-4 space-y-3 text-sm">
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Experience</dt>
            <dd class="text-slate-200"><%= current_user.years_of_experience || 0 %> years</dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Rank</dt>
            <dd class="text-slate-200">
              <% if current_user.rank_position.present? %>
                #<%= current_user.rank_position %>
              <% else %>
                Unranked
              <% end %>
            </dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Score</dt>
            <dd class="text-slate-200"><%= current_user.ranking_score.to_f.round(2) %></dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-400">Rating</dt>
            <dd class="text-slate-200"><%= (@average_rating || 0).round(1) %> (<%= @review_count %>)</dd>
          </div>
        </dl>
        <% badge = nil %>
        <% if current_user.rank_position.to_i > 0 && current_user.rank_position.to_i <= 3 %>
          <% badge = "Top Creator" %>
        <% elsif (@average_rating || 0).to_f >= 4.5 && Purchase.joins(:bundle).where(bundles: { user_id: current_user.id }).count > 20 %>
          <% badge = "Elite Creator" %>
        <% elsif current_user.rank_position.to_i > 0 && current_user.rank_position.to_i <= 20 %>
          <% badge = "Rising Creator" %>
        <% end %>
        <% if badge.present? %>
          <div class="mt-4 inline-flex items-center gap-2 rounded-2xl border border-fuchsia-500/20 bg-fuchsia-500/10 px-3 py-2 text-xs font-semibold text-fuchsia-100 shadow-[0_0_20px_rgba(217,70,239,0.15)]">
            <span class="h-2 w-2 rounded-full bg-gradient-to-r from-fuchsia-400 to-cyan-300"></span>
            <span><%= badge %></span>
          </div>
        <% end %>
        <p class="mt-4 text-sm text-slate-400"><%= current_user.profile_description.presence || "No bio yet." %></p>
      </div>
    </div>
  </div>
</section>
